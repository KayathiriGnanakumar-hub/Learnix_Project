# Visual Flow Diagram

## Complete User Journey

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                         LEARNIX PLATFORM FLOW                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  USER HOME PAGE  â”‚
â”‚   /              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   COURSE LISTING PAGE (/courses)     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Course 1: React JS      $499     â”‚â”‚
â”‚  â”‚ Course 2: Python        $399     â”‚â”‚
â”‚  â”‚ Course 3: Node.js       $549     â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚           [Browse/Search]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ [Click on course]
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COURSE DETAILS PAGE (/course/:id)         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ React JS - Full Course                 â”‚ â”‚
â”‚ â”‚ Rating: â­â­â­â­â­                          â”‚ â”‚
â”‚ â”‚ Instructor: John Doe                  â”‚ â”‚
â”‚ â”‚ Price: $499                            â”‚ â”‚
â”‚ â”‚ Videos: 10 lessons                     â”‚ â”‚
â”‚ â”‚                                        â”‚ â”‚
â”‚ â”‚      [ENROLL NOW]                      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ [Click Enroll Now]
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ User Logged In? â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ No              Yes â”‚
      â–¼                    â–¼
   [LOGIN]          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   [REGISTER]       â”‚  PAYMENT PAGE        â”‚
      â”‚             â”‚  (/payment)          â”‚
      â”‚             â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚             â”‚ â”‚Cart:               â”‚
      â”‚             â”‚ â”‚ - React JS: $499   â”‚
      â”‚             â”‚ â”‚ Total: $499        â”‚
      â”‚             â”‚ â”‚ [PAY NOW $499]     â”‚
      â”‚             â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                    â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚ [After Login]
                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  PAYMENT SUCCESS     â”‚
    â”‚  (/payment-success)  â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚ â”‚ Processing       â”‚ â”‚
    â”‚ â”‚ â³ Enrolling ... â”‚ â”‚
    â”‚ â”‚                  â”‚ â”‚
    â”‚ â”‚ POST /api/enroll â”‚ â”‚
    â”‚ â”‚ { courseId: 1,   â”‚ â”‚
    â”‚ â”‚   complete: true â”‚ â”‚
    â”‚ â”‚ }                â”‚ â”‚
    â”‚ â”‚                  â”‚ â”‚
    â”‚ â”‚ DB UPDATE:       â”‚ â”‚
    â”‚ â”‚ INSERT INTO      â”‚ â”‚
    â”‚ â”‚ enrollments      â”‚ â”‚
    â”‚ â”‚ status='completed'
    â”‚ â”‚ progress=100     â”‚ â”‚
    â”‚ â”‚ completed_at=NOW â”‚ â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â”‚                      â”‚
    â”‚ âœ… Success!          â”‚
    â”‚ Redirecting...       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ (2 sec)
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  STUDENT DASHBOARD                   â”‚
    â”‚  (/students/dashboard)               â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚ â”‚ Welcome, John Doe! ğŸ‘‹            â”‚ â”‚
    â”‚ â”‚                                  â”‚ â”‚
    â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â” â”‚ â”‚
    â”‚ â”‚ â”‚ 1   â”‚ 0       â”‚ 1      â”‚ 0  â”‚ â”‚ â”‚
    â”‚ â”‚ â”‚Enrl â”‚Compl    â”‚Cert    â”‚Int â”‚ â”‚ â”‚
    â”‚ â”‚ â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜ â”‚ â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                     â”‚
    â–¼                     â–¼
 [MY COURSES]        [PROGRESS]
 (/students/        (/students/
  my-courses)       progress)
    â”‚                   â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
    â”‚ â”‚React JS [100%] â”‚â”‚
    â”‚ â”‚âœ“ Enrolled      â”‚â”‚
    â”‚ â”‚[CONTINUE]      â”‚â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
    â”‚                   â”‚
    â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COURSE PLAYBACK                     â”‚
â”‚  (/course/:id with isEnrolled=true)  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â–¶ Video 1: Intro               â”‚ â”‚
â”‚ â”‚ Video 2: Components              â”‚ â”‚
â”‚ â”‚ Video 3: State Management        â”‚ â”‚
â”‚ â”‚ ... 10 videos total              â”‚ â”‚
â”‚ â”‚                                  â”‚ â”‚
â”‚ â”‚ ğŸ“º [YOUTUBE VIDEO PLAYER]        â”‚ â”‚
â”‚ â”‚                                  â”‚ â”‚
â”‚ â”‚ When video ends:                 â”‚ â”‚
â”‚ â”‚ - Mark as completed              â”‚ â”‚
â”‚ â”‚ - Enable "Take Quiz Now"         â”‚ â”‚
â”‚ â”‚                                  â”‚ â”‚
â”‚ â”‚ [TAKE QUIZ NOW]                  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ [Click Take Quiz]
                   â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  QUIZ PAGE                       â”‚
    â”‚  (/quiz/:videoId)                â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚ â”‚ ğŸ“ Video Quiz                â”‚ â”‚
    â”‚ â”‚ Question 1 of 10 â±ï¸ 9:45    â”‚ â”‚
    â”‚ â”‚                              â”‚ â”‚
    â”‚ â”‚ What is a React component?   â”‚ â”‚
    â”‚ â”‚ â—‹ A function or class        â”‚ â”‚
    â”‚ â”‚ â—‹ A variable                 â”‚ â”‚
    â”‚ â”‚ â—‹ A HTML element             â”‚ â”‚
    â”‚ â”‚ â—‹ A CSS class                â”‚ â”‚
    â”‚ â”‚                              â”‚ â”‚
    â”‚ â”‚ [PREV] [1][2]...[10] [NEXT] â”‚ â”‚
    â”‚ â”‚        [SUBMIT QUIZ]         â”‚ â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â”‚                                  â”‚
    â”‚ Questions fetched from:          â”‚
    â”‚ GET /api/admin/quizzes/video/1  â”‚
    â”‚ Response: [max 10 questions]     â”‚
    â”‚ Each question from video_quizzes â”‚
    â”‚ table, NOT feedback form         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ [Submit Quiz]
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Score >= 70%?       â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ No (< 70%)           Yes  â”‚
         â–¼                           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ "Try Again" â”‚      â”‚ âœ… Quiz Passed!    â”‚
    â”‚ [RETRY]     â”‚      â”‚ Score: 8/10 (80%) â”‚
    â”‚             â”‚      â”‚ Video marked âœ“    â”‚
    â”‚ [BACK]      â”‚      â”‚ [BACK TO COURSE]   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚ PROGRESS UPDATED         â”‚
                         â”‚ (video_progress table)   â”‚
                         â”‚                          â”‚
                         â”‚ Video 1: âœ“ Completed    â”‚
                         â”‚ Video 2: â³ Continue     â”‚
                         â”‚ ...                      â”‚
                         â”‚ Progress: 10% â†’ 20%     â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚ REPEAT FOR ALL VIDEOS    â”‚
                         â”‚ - Watch Video 2          â”‚
                         â”‚ - Take Quiz (pass)       â”‚
                         â”‚ - Watch Video 3          â”‚
                         â”‚ - Take Quiz (pass)       â”‚
                         â”‚ ...                      â”‚
                         â”‚ - Watch Video 10         â”‚
                         â”‚ - Take Quiz (pass)       â”‚
                         â”‚                          â”‚
                         â”‚ Progress: 100%           â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                               â”‚                               â”‚
        â–¼                               â–¼                               â–¼
    [PROGRESS PAGE]            [MY COURSES PAGE]             [CERTIFICATES PAGE]
    (/students/                (/students/                  (/students/
     progress)                  my-courses)                  certificates)
                                                                         
  React JS                    React JS                         ğŸ† React JS Certificate
  Progress: 100%              âœ“ Enrolled                       âœ“ Status: Earned
  [ğŸ‰ Complete!]              Progress: 100%                   [DOWNLOAD] â¬‡ï¸
                              Status: Completed
                              
                              Backend Check:
                              GET /api/enroll/my
                              Response includes:
                              {
                                status: 'completed',
                                progress: 100,
                                completed_at: '2026-01-04...'
                              }
```

## Payment Flow Detail

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ENROLLMENT & PAYMENT DETAIL                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STEP 1: PAYMENT PAGE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Cart Contents            â”‚
â”‚ â”œâ”€ React JS: $499        â”‚
â”‚ â””â”€ Total: $499           â”‚
â”‚                          â”‚
â”‚ [PAY NOW]                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
STEP 2: PaymentSuccess Component Triggers
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ for (const course of cart) {             â”‚
â”‚   POST /api/enroll {                     â”‚
â”‚     courseId: 1,                         â”‚
â”‚     complete: true  â† KEY ADDITION       â”‚
â”‚   }                                      â”‚
â”‚ }                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
STEP 3: Backend enrollmentController
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const complete = req.body.complete       â”‚
â”‚                                          â”‚
â”‚ if (complete) {                          â”‚
â”‚   sql = INSERT/UPDATE enrollments        â”‚
â”‚   SET status='completed'                 â”‚
â”‚       progress=100                       â”‚
â”‚       completed_at=NOW()                 â”‚
â”‚ } else {                                 â”‚
â”‚   sql = INSERT/UPDATE enrollments        â”‚
â”‚   SET status='in_progress'               â”‚
â”‚       progress=0                         â”‚
â”‚ }                                        â”‚
â”‚                                          â”‚
â”‚ db.query(sql, [email, courseId])         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
STEP 4: Database Updated
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ enrollments table row created/updated:   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ id    | 5                          â”‚   â”‚
â”‚ â”‚ user_email | john@email.com        â”‚   â”‚
â”‚ â”‚ course_id  | 1                     â”‚   â”‚
â”‚ â”‚ status     | 'completed'           â”‚   â”‚
â”‚ â”‚ progress   | 100                   â”‚   â”‚
â”‚ â”‚ enrolled_at| 2026-01-04 10:00:00  â”‚   â”‚
â”‚ â”‚ completed_at| 2026-01-04 10:00:01 â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
STEP 5: Frontend Clears Cart & Redirects
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ clearCart()                              â”‚
â”‚ setTimeout(() => {                       â”‚
â”‚   navigate('/students/my-courses')       â”‚
â”‚ }, 2000)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ (2 second delay for UX)
                       â–¼
STEP 6: Student Dashboard Shows Enrollment
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Enrolled: 1 course                       â”‚
â”‚ Completed: 1 course                      â”‚
â”‚ Certificates: 1 earned                   â”‚
â”‚                                          â”‚
â”‚ (Populated from GET /api/enroll/my)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

COMPARISON: With vs Without complete:true

WITHOUT complete:true (old way)
â”œâ”€ Enrollment: status='in_progress', progress=0
â”œâ”€ User must watch videos
â”œâ”€ User must pass quizzes
â”œâ”€ Progress manually updates to 100%
â”œâ”€ Only then certificate available
â””â”€ Takes hours/days

WITH complete:true (new way)
â”œâ”€ Enrollment: status='completed', progress=100
â”œâ”€ Certificate available immediately
â”œâ”€ User can still watch videos/quizzes if desired
â”œâ”€ Better UX for fast learners
â””â”€ Supports instant gratification model
```

## Certificate Generation Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           CERTIFICATE GENERATION                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STEP 1: User in Certificates Page
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ /students/certificates           â”‚
â”‚                                  â”‚
â”‚ Frontend logic:                  â”‚
â”‚ for (course of enrollments) {    â”‚
â”‚   if (course.status ==='completed'
â”‚       && course.progress === 100)â”‚
â”‚     displayCertificate(course)   â”‚
â”‚ }                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
STEP 2: Display Certificate Card
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ† React JS Certificate          â”‚
â”‚ Status: Completed                â”‚
â”‚ Date: January 4, 2026            â”‚
â”‚ Progress: 100%                   â”‚
â”‚                                  â”‚
â”‚ [DOWNLOAD CERTIFICATE] â¬‡ï¸        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ [Click Download]
               â–¼
STEP 3: Extract User ID from JWT
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const token = localStorage       â”‚
â”‚                .getItem('token') â”‚
â”‚                                  â”‚
â”‚ const decoded = JSON.parse(      â”‚
â”‚   atob(token.split('.')[1])      â”‚
â”‚ )                                â”‚
â”‚ const userId = decoded.id        â”‚
â”‚                                  â”‚
â”‚ // userId = 5                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
STEP 4: Request Certificate PDF
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GET /api/certificates/generate/  â”‚
â”‚     5/1                          â”‚
â”‚     (userId/courseId)            â”‚
â”‚                                  â”‚
â”‚ Headers:                         â”‚
â”‚ Authorization: Bearer <token>    â”‚
â”‚ ResponseType: blob               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
STEP 5: Backend Certificate Controller
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Query enrollments table:         â”‚
â”‚ SELECT * FROM enrollments       â”‚
â”‚ WHERE user_id = 5               â”‚
â”‚   AND course_id = 1             â”‚
â”‚   AND status = 'completed'      â”‚
â”‚   AND progress = 100            â”‚
â”‚                                  â”‚
â”‚ If found:                        â”‚
â”‚   Generate PDF using PDFKit      â”‚
â”‚   Set response headers:          â”‚
â”‚   - Content-Type: application/pdfâ”‚
â”‚   - Content-Disposition:         â”‚
â”‚     attachment; filename=...    â”‚
â”‚   Pipe PDF to response           â”‚
â”‚                                  â”‚
â”‚ If not found:                    â”‚
â”‚   Return 404 error              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
STEP 6: Browser Downloads PDF
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Certificate PDF Generated with:  â”‚
â”‚ â”œâ”€ Golden borders                â”‚
â”‚ â”œâ”€ Company logo                  â”‚
â”‚ â”œâ”€ Student name                  â”‚
â”‚ â”œâ”€ Course name                   â”‚
â”‚ â”œâ”€ Completion date               â”‚
â”‚ â”œâ”€ Certificate ID                â”‚
â”‚ â””â”€ Signature area                â”‚
â”‚                                  â”‚
â”‚ File: certificate_5_1.pdf        â”‚
â”‚ Saved to: Downloads folder       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**This visual flow shows:**
1. âœ… Complete user journey from browsing to certificate
2. âœ… All payment logic with `complete: true` flag
3. âœ… Database updates in real-time
4. âœ… Instant certificate availability after payment
5. âœ… Optional video/quiz engagement after payment
